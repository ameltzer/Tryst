/* 
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

const send = require('@tonybadguy/call-me-maybe');


exports.create = create; 
class RESTFULService{
    constructor(baseUrl,token){
        this.baseUrl = baseUrl;
        this.token = token;
    }
    registerEndpoint(url,functionName){
        this[functionName] = function(parameters, urlParams=null){
          params = {
            url: this.baseUrl+url,
            bearerToken: this.token,
            query: parameters
          };
          if(urlParams!==null){
              params['urlParams']=urlParams;
          }
          return send(params);
        };
    }
}
function create(baseUrl, token){
    return new RESTFULService(baseUrl, token);
}